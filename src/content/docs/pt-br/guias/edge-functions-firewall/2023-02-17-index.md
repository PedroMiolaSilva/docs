---
layout: page-documentation-md
title: Como criar e configurar uma edge function em seu Edge Firewall
description: Edge Functions são funções executadas na borda da rede, mais perto do usuário. Elas auxiliam na segurança de suas aplicações através do Edge Firewall.
meta_tags: firewall
namespace: documentation_how_to_edge_functions_firewall
menu_namespace: 
og_image: ''
meta_tag_robots_no_index: false
permalink: /documentation/products/guides/edge-functions/firewall/
permalink_pt-br: /documentacao/produtos/guias/edge-functions/firewall/
---

# Como criar e configurar uma edge function em seu Edge Firewall

**Edge Functions** são funções executadas no edge da rede, mais perto do usuário. Elas auxiliam na segurança de suas aplicações através do **Edge Firewall**.

Para usar functions no seu Edge Firewall, você deve seguir dois passos: 

- Criar uma edge function com o *Initiator type* definido como Edge Firewall.
- Configurar os *behaviors* na página do Edge Firewall.

---

> 1. [Criando uma edge function](#criando-edge-function)\
> 2. [Configurando uma edge function no Edge Firewall](#configurando-edge-firewall-function)\
> 2.1. [Criando um Rules Set](#criando-rules-set)\
> 2.2. [Adicionando uma edge function ao Edge Firewall](#add-func-firewall)

---

## 1. Criando uma edge function {#criando-edge-function}

1. No [Real-Time Manager RTM](https://manager.azion.com/), no canto superior esquerdo, selecione **Edge Functions** dentro da seção **Edge Libraries**.
2. Clique em **Add a Function**.
3. Escolha um nome para a função.
4. Escreva sua função, ou simplesmente copie e cole o exemplo a seguir: 
    > **Nota**: a edge function a ser usada no firewall deve conter um *evento finalizador*, como apresentado a seguir.

    ```javascript
    addEventListener("firewall", (event) => {
        event.deny();
    });
    ```

{:start="5"}

5. Após definir o código da função e o colocar dentro do *codeblock*, defina o `Initiator Type` para `Edge Firewall`.
6. Salve a função.

Agora, sua edge function pode ser usada em configurações do edge firewall.

---

## 2. Configurando uma edge function no Edge Firewall {#configurando-edge-firewall-function}

Depois de criar uma edge function com o `Initiator type` definido como Edge Firewall, você precisa configurar o firewall para implementá-la.

### 2.1 Criando um Rules Set {#criando-rules-set}

1. No [Real-Time Manager RTM](https://manager.azion.com/), no canto superior esquerdo, selecione **Edge Firewall** na seção **Secure**.
2. Clique em **Add a Rule Set**.
3. Escolha um nome para o Rules Set.
4. Escolha os domínios aos quais você deseja implementar as regras.
5. Habilite o uso do módulo **Edge Functions**.
6. Ative o edge firewall e clique em salvar.

Após salvar a configuração, na mesma página, as abas **Functions** e **Rules Engine** ficam acessiveis.

### 2.2 Adicionando uma edge function ao Edge Firewall {#add-func-firewall}

1. Vá para a aba **Functions**.
2. Escolha um **Instance Name**.
3. Selecione **Add Function**.
4. Escolha a função desejada.
5. Clique no botao **Save**.
    > **Nota**: apenas as funções com o *Initiator Type* definido como Edge Firewall são listadas.

{:start="6"}

6. Acesse a aba **Rules Engine**.
7. Selecione **New Rule**.
8. Escreva o nome da nova regra.
9. Configure o critério que será aplicado.
10. Defina o *behavior* para **Run Function** e selecione a função que será executada.
11. Clique no botão **Save**.

> **Nota**: as mudanças levam alguns instantes para serem propagadas.

---

## Leia também

- [Edge Firewall - Edge Functions Instances]({% tl documentation_products_edge_firewall_edge_functions_instances %})
- [Edge Functions]({% tl documentation_products_edge_functions %})
- [Edge Functions no Edge Firewall]({% tl documentation_products_edge_functions_firewall %})
- [Edge Firewall]({% tl documentation_products_edge_firewall %})

---

Não encontrou o que procurava? [Abra um ticket](https://tickets.azion.com/pt-BR/support/login/).
