---

title: Edge Caching
description: Edge Caching acelera a entrega de conteúdo através de cache em edge e deixa sua aplicação mais próxima de seus usuários.
meta_tags: caching, edge, edge caching, edge computing, performance
namespace: documentation_products_edge_caching
permalink: /documentacao/produtos/edge-application/edge-caching/
---

**Edge Caching** é um módulo de **Edge Application** que reduz latência e permite uma alta taxa de transferência para suas aplicações por meio da rede mundial de edge nodes da Azion.

---

## 1. Como funciona 
O **Edge Caching** é uma funcionalidade padrão disponibilizada para todas Edge Applications na Azion, garantindo performance e baixa latência. Ele é composto por uma arquitetura de proxy reverso, por meio da qual seus usuários se conectam nos Edge Nodes de nossa rede global altamente distribuída. O Edge Caching pode realizar *caching* de seu conteúdo e, além disso, ampliar sua versatilidade com o add-on **L2 Caching**.

Quando um usuário requisita um conteúdo na internet, seu navegador ou aplicação inicia o processo pela resolução de DNS, a fim de traduzir o domínio solicitado para um endereço IP. Ao utilizar a Azion, você aponta o DNS de sua aplicação web para um endereço gerado ao criar um Domain na Azion.

A Azion seleciona o Edge Node mais próximo do usuário utilizando o seu **Software-Defined Networking (SDN) Router**, reduzindo latência e aumentando a velocidade da transferência do conteúdo.

---

## 2. Cache Settings

Este serviço é responsável por criar configurações de cache, contendo diversas funcionalidades que ampliam a forma como o conteúdo é entregue.

O **Cache Settings** trabalha com duas versões:

1. A primeira versão foca em conteúdos estáticos, ou seja, não é necessário que você tenha o serviço de **Application Acceleration** habilitado.
2. A segunda versão, que emprega o módulo **Edge Caching**, estende inúmeras opções de configuração na interface de Cache Settings.

> Consulte o guia sobre [Como configurar políticas de cache para o Edge Application](/pt-br/documentacao/produtos/guias/edge-caching/) para personalizar suas políticas de cache.

### 2.1. Browser Cache Settings 

O **Browser Cache Settings** determina a quantidade de tempo que o conteúdo fica em cache no navegador de internet. É possível configurar a **Edge Application** para:

| Honor Origin Cache Headers                    | Override Cache Settings                       |
| --------------------------------------------- | --------------------------------------------- |
| Este recurso respeita as definições de cache enviadas por seus servidores de origem por meio de cabeçalhos HTTP (Cache-Control and Expires), enviando os mesmos cabeçalhos para o navegador web. | É a funcionalidade que sobrescreve o cache do servidor de origem, configurando o *time-to-live* (TTL) manualmente. |

### 2.2. CDN Cache Settings 

**CDN Cache Settings** é a quantidade de tempo que as Edge Applications da Azion realizam *cache* do conteúdo. É possível configurar a **Edge Application** para:

| Honor Origin Cache Headers                                   | Override Cache Settings                                      |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| Este recurso respeita as definições de cache enviadas por seus servidores de origem por meio de cabeçalhos HTTP (*Cache-Control and Expires*), enviando os mesmos cabeçalhos para o navegador web. | É a funcionalidade que sobrescreve o cache do servidor de origem configurando o TTL manualmente.<br /><br />Para alterar o TTL do cache na CDN para valores abaixo de 60 segundos, você deve habilitar o módulo [Application Acceleration](/pt-br/documentacao/produtos/edge-application/application-acceleration/). |

> **Importante**: quando o TTL de CDN cache é menor do que 10 segundos, há uma possibilidade de que sua aplicação incorra cache misses. Isso acontece devido à uma lentidão de resposta dos servidores da origem, por exemplo, em períodos de manutenção. Nessas situações, a Azion recomenda que você aplique o comportamento [Bypass Cache](/pt-br/documentacao/produtos/edge-application/application-acceleration/#bypass-cache) em sua aplicação ou defina um valor de TTL maior do que 10 para acomodar a conexão entre a Azion e origens lentas.

---

## 3. L2 Caching 

> Essa funcionalidade somente estará disponível caso o serviço esteja ativado. Para ativar **L2 Caching**, [contate nossa equipe de vendas](https://www.azion.com/pt-br/contate-vendas/).

**L2 Caching** é uma camada adicional de cache entre a edge da Azion e sua origem que ajuda a reduzir ainda mais a carga na sua infraestrutura.

Ao acessar suas aplicações na Azion, seu usuário acessa nossa rede altamente distribuída e capaz de realizar edge caching. Ao ativar o L2 Caching em suas edge applications, você passa a contar com uma segunda camada de cache que será responsável por alimentar o edge, mantendo o seu conteúdo em cache pelo tempo que você determinar.

Ao utilizar o L2 Caching como uma camada adicional de cache, é necessário incluir uma configuração por região, por exemplo: `sa-brazil` para o Brasil, `na-united-states` para os EUA etc, dependo da região.

O L2 Caching foi desenhado especialmente para objetos que podem permanecer um longo período de tempo em cache. Assim, você só poderá ativá-lo em políticas de cache com TTL igual ou superior a *3 segundos*, sendo por padrão o TTL de *60 segundos*.

O módulo L2 Caching atualmente não suporta ignorar o cache. Você pode [configurar uma regra de Bypass Cache](/pt-br/documentacao/produtos/guias/edge-caching/#bypass-cache) para cache na Azion, mas aplicações com configuração de cache na L2 ativada continuarão a manter cache nessa camada pelo TTL especificado.

Sempre que necessário, você pode utilizar o **Real-Time Purge** para expirar seu conteúdo do L2 Caching antes do tempo previsto de TTL. Lembre-se de purgar primeiro no L2 e somente depois no **Edge Caching**. Isso evita a realimentação do edge com conteúdo desatualizado do L2.

> **Atenção**: não é possível utilizar a configuração **Honor Origin** para CDN Cache. É necessário colocar um TTL para sobrescrever o CDN cache.

**Para utilizar o módulo de L2 Caching, siga os seguintes passos:**

1. Acesse o [Real-Time Manager](https://manager.azion.com/).
2. Selecione **Products Menu** > **Edge Application**.
3. Selecione a **Edge Application** na qual deseja utilizar o módulo.
4. Selecione a aba **Main Settings**, caso ainda não esteja selecionada.
5. No final da seção **Edge Application Modules**, ative a chave **L2 Caching**.
6. Selecione a aba **Cache Settings**.
7. Para gerenciar as configurações da camada de L2 Caching, clique no botão **Add Cache Settings** para criar uma nova configuração de cache, ou selecione uma das existentes na lista **Cache Settings List** para editá-la.
8. Configure o campo  **Default TTL (seconds)** para um valor maior ou igual a *3 segundos*.
9. Habilite o botão **L2 Caching**.
10. Clique no botão **Save** para salvar a sua configuração.

---

## 4. Slice Settings 

**Slice** é uma funcionalidade para Edge Applications que processa grandes quantidades de dados de forma mais efetiva, reduzindo a latência e economizando largura de banda.

Ao habilitar essa funcionalidade, os arquivos podem estar fragmentados. Tais fragmentos são entregues gradativamente ao usuário final de acordo com o consumo de dados, evitando uma transferência abrupta de dados que poderia ser interrompida pelo usuário. A funcionalidade Slice armazena dados sob demanda no momento em que o usuário os solicita, iniciando a operação de cache.

> **Nota**: ao ativar a funcionalidade Slice, o *cache key* atual será ignorado e um novo será formado.

Essa funcionalidade trabalha com um *slice-range* padrão de *1024kB*. Caso você deseje modificar o *slice-range*, [contate nossa equipe de vendas](https://www.azion.com/pt-br/contate-vendas/).

> **Dica**: inicialmente, a funcionalidade Slice trabalha com a camada **Edge Caching**, mas não se restringe a ela. Na seção **Slice Settings**, também é possível ativar o slicing na camada [L2 Caching](#l2-caching) marcando a caixa de seleção **L2**, desde que o L2 Caching já esteja ativado.

**Para ativar a funcionalidade Slice Settings, siga os seguintes passos:**

1. Acesse o [Real-Time Manager](https://manager.azion.com/).
2. No canto superior esquerdo da página, selecione **Products menu** > **Edge Application**. A página **Edge Applications** aparece com uma tabela contendo os aplicativos existentes.
3. Na tabela, selecione uma **Edge Application** ou [crie uma nova aplicação](/pt-br/documentacao/produtos/ponto-de-partida/#settings-app).
4. Selecione a guia **Cache Settings**. A seção **Cache Settings List** mostra uma tabela contendo as configurações de cache.
5. Selecione a linha de **Cache Setting** na qual você deseja ativar **Slice Settings**.
6. Na seção **Slice Settings**, ative a chave **Slice Configuration**. Por padrão, a configuração **Edge Caching** será selecionada automaticamente.
7. Se você tiver o módulo L2 Caching, marque a caixa de seleção **L2 Caching** para habilitar esta opção.

> **Nota**: se você não tiver o módulo, a caixa de seleção **L2 Caching** não estará visível na seção **Slice Settings**. Para habilitar L2 Caching, [contate nossa equipe de vendas](https://www.azion.com/pt-br/contate-vendas/).

---

## 5. Cache de métodos HTTP
Por padrão, a Azion armazena em cache apenas as solicitações GET e HEAD. Para habilitar o método OPTIONS, você deve ativar a botão de **Cache Options** dentro das configurações de sua **Edge Application** no **Real-Time Manager (RTM)**.

O cache HTTP armazena uma resposta vinculada à uma solicitação e a reutiliza para solicitações subsequentes.

Você pode ativar a chave **Enable caching for POST**, permitindo que a Azion armazene em cache as solicitações POST; a chave **Enable caching for OPTIONS** permite que a Azion armazene em cache as solicitações de OPTIONS. Essa duas opções de cache implicam no uso do corpo da solicitação como parte da *cache key*.

> Para habilitar o recurso **Cache OPTIONS** ou **Cache POST**, você deve ter o produto [Application Acceleration](/pt-br/documentacao/produtos/edge-application/application-acceleration/) ativado.

---

## 6. Stale Cache

Quando o cache da sua aplicação passa da data de expiração, ele se torna *stale* (obsoleto) e o servidor busca na origem a versão mais atualizada. Essa nova versão, com data de expiração atualizada, sobrescreve a antiga (*stale*).

No entanto, o servidor pode encontrar problemas e não conseguir buscar a versão mais atualizada da sua aplicação na origem. Nesses casos, ele entrega a última versão dela, mesmo expirada. Esse comportamento é conhecido como **Stale Cache**.

Stale Cache é uma configuração padrão do módulo **Edge Caching**. No entanto, se sua **Edge Application** precisar, é possível desativá-la.

> **Atenção**: é importante lembrar que ao desativar o Stale Cache, caso o servidor não consiga atualizar o cache na origem, ele retornará um erro ao usuário, interrompendo a sessão.

---

## 7. Advanced Cache Key

Você pode utilizar a Azion para entregar seu conteúdo dinâmico ou estático. Mesmo a parte dinâmica de um site muitas vezes pode ser cacheada para um perfil de usuários, agrupado de acordo com as necessidades específicas de sua aplicação, como cidade, perfil de navegação ou perfil de compras.

Consulte a documentação da [Advanced Cache Key](/pt-br/documentacao/produtos/edge-application/application-acceleration/#advanced-cache-key) no módulo **Application Acceleration** para saber mais sobre essa configuração.

---

## 8. Adaptive Delivery 

A funcionalidade **Adaptive Delivery** detecta grupos de dispositivos que você cria usando a funcionalidade [Device Groups](/pt-br/documentacao/produtos/edge-application/device-groups/), permitindo que você configure como o a Azion deve armazenar o seu conteúdo em cache.

- **Content does not vary by Device Groups (Improves Caching)**: escolha essa opção para entregar a mesma versão do conteúdo, independentemente da detecção do dispositivo.

- **Content varies by some Device Groups (Allowed rules)**: escolha essa opção para que a Azion mantenha variações baseadas em dispositivos de seus objetos no cache.

---

Não encontrou o que procurava? [Abra um ticket](https://tickets.azion.com/pt-BR/support/login/).
