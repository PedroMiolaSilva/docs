---
title: Edge Node
description: O Azion Edge Node permite que você crie a sua própria estrutura Edge e habilite a instalação de serviços e recursos em tempo real.
meta_tags: Edge Node, Edge Computing
namespace: documentation_products_edge_orchestrator_edge_nodes
permalink: /documentacao/produtos/edge-orchestrator/edge-node/
---

O Azion **Edge Node** permite que você crie a sua própria estrutura Edge e habilite a instalação de serviços e recursos em tempo real.

É aberto e pode ser executado em vários tipos de arquiteturas de microprocessador: x86 e ARM, e em vários tipos de tamanho de equipamento, incluindo Raspberry PI, equipamentos de rede como switches de rede e roteadores SD-WAN, assim como servidores corporativos.

---

## 1. Instalação

### A instalação do Edge Node é dividida em 3 etapas:

1. Gere uma credencial para executar as ações;

   > Para gerar a credencial necessária para autenticar seus edge nodes, siga os passos da [documentação de credenciais](/pt-br/documentacao/produtos/credenciais/).
2. Instale o agente **Edge Orchestrator** nos seus dispositivos;
3. Autentique o dispositivo depois da instalação.

Para iniciar o processo de instalação do **Edge Node**, você deve fazer o download do binário de instalação do **Edge Orchestrator** de sua preferência.

> **Nota**: Os comandos executados no agente *edge-orchestrator* devem ser executados com *privilégios de usuário root*.

O usuário root é aquele que tem acesso irrestrito a todos os componentes do sistema, tanto arquivos quanto processos. Caso você não tenha esses privilégios pode haver falha na instalação ao tentar gerenciar alguns requisitos do sistema operacional que exigem esses privilégios.

Confira a listagem de plataformas compatíveis com o Azion Edge Node e faça o download:

| Sistema Operacional | Arquitetura | Arquivo |
| :--- | :---: | --- |
| FreeBSD | x86_64 | [edge-orchestrator](https://downloads.azion.com/freebsd/x86_64/edge-orchestrator) |
| FreeBSD | ARM64 | [edge-orchestrator](https://downloads.azion.com/freebsd/arm64/edge-orchestrator) |
| Linux | x86_32 | [edge-orchestrator](https://downloads.azion.com/linux/x86_32/edge-orchestrator) |
| Linux | x86_64 | [edge-orchestrator](https://downloads.azion.com/linux/x86_64/edge-orchestrator) |
| Linux | ARM32 | [edge-orchestrator](https://downloads.azion.com/linux/arm32/edge-orchestrator) |
| Linux | ARM64 | [edge-orchestrator](https://downloads.azion.com/linux/arm64/edge-orchestrator) |
| MacOS | x86_64 | [edge-orchestrator](https://downloads.azion.com/darwin/x86_64/edge-orchestrator) |

Como alternativa, você pode fazer download via linha de comando. No exemplo, o link para download é referente ao agente Linux/x86_64. Caso queira fazer o download de outra versão, basta alterar a URL para o sistema operacional ou a arquitetura desejada:

`curl -O http://downloads.azion.com/linux/x86_64/edge-orchestrator`

Após o download, você deve seguir os passos abaixo, para que seu dispositivo instale o agente do **Edge Orchestrator**:

1. Instale o agente do **Edge Orchestrator**:<br />
   `chmod +x edge-orchestrator`<br />
   `./edge-orchestrator install`
2. Informe o **token** para o agente do Edge Orchestrator;
3. Confirme as etapas seguintes;
4. Inicialize o agente do **Edge Orchestrator** após finalizar a instalação:<br />
   `edge-orchestrator start`<br />
   **Observação:** caso o seu sistema operacional não disponha de um gerenciador de serviços (systemd, por exemplo), você deve executar como foreground: <br/>`edge-orchestrator start --foreground`

   > Os _logs_ de execução do agente do Edge Orchestrator são armazenados em <br>`/var/log/azion/edge-orchestrator.log`

---

## 2. Visualização de seus nodes

Sempre que o código de instalação for executado em algum dispositivo, seguido da autenticação via token, os edge nodes serão listados no [Real-Time Manager](https://manager.azion.com/).

Para visualizar a lista de edge nodes criados para a sua conta, siga os passos abaixo:

1. Acesse o [Real-Time Manager](https://manager.azion.com/);
2. Acesse o item **Edge Orchestration** no menu superior esquerdo e selecione a página **Edge Node**.

> Os itens listados podem ser verificados validando a coluna de HashId, pois ela contém o hash utilizado para a criação e autenticação do edge node.

---

## 3. Autorização
Para começar a orquestração dos seus Edge Nodes, eles devem ser autorizados. Para autorizá-los, os seguintes passos devem ser executados:

1. Abra a lista de **Edge Nodes** no [Real-Time Manager](https://manager.azion.com/).
2. Clique no **ícone** (chave) e aceite a janela de confirmação.

> Após a autorização, o **Edge Node** pode demorar até *10 segundos* para que a orquestração dos serviços seja iniciada.

Você também pode autorizar todos os seus edge nodes que desejar de uma única vez. Para fazer uso dessa opção, siga os passos abaixo:

1. Abra a lista de **Edge Nodes** no [Real-Time Manager](https://manager.azion.com/);
2. Selecione os itens que você quer autorizar ou, se preferir, selecione todos os ícones clicando na primeira caixa de seleção à esquerda;
3. No canto superior direito, clique no botão **Actions** e selecione **Authorize**;
4. Uma mensagem confirmando a sua ação será mostrada, clique no botão **Confirm** para salvar sua seleção;
5. Você verá a seguinte mensagem de confirmação: *"X nodes were successfully authorized!"*

---

## 4. Serviços

Para provisionar os serviços cadastrados na sua biblioteca, siga os passos abaixo:

1. Abra a lista de **Edge Nodes** no [Real-Time Manager](https://manager.azion.com/);
2. Selecione o **Edge Node** que deseja configurar;
3. Acesse a aba **Services** e clicar no botão **Add Service**;
4. Vincule o serviço desejado e, caso necessário, configure as variáveis necessárias para a sua execução.

> Os serviços disponíveis para orquestração via Edge Node devem estar cadastrados em **Edge Libraries** > **Edge Services** e marcados como ativos.

Após a provisão do serviço, o Edge Node inicia a orquestração seguindo a prioridade dos recursos. Você pode acompanhar o processo de instalação dos serviços via logs no agente do Edge Orchestrator.

> Os logs de instalação do serviço são armazenados em <br/>`/var/log/azion/edge-services.log`

---

## 5. Comandos e opções do agente

O agente do Edge Orchestrator apresenta alguns comandos e opções para facilitar o seu uso.

|  | Descrição |
| :--- | :--- |
| --debug ou -d | Define os logs do agente como modo depuração. |
| --help ou -h | Ajuda sobre os comandos que podem ser executados no agente. |
| install | Instala o agente no device do cliente; copia o binário para o local de instalação; adiciona o agente do Edge Orchestrator ao gerenciador de serviços do device (caso exista); e configura as credenciais para autenticação do Edge Node. |
| start \[--foreground\] | Inicializa o agente do Edge Orchestrator por meio do gerenciador de serviços do device.<br /> Observação: a opção foreground é utilizada para execução em primeiro plano. |
| start \[-g OR --join-group\] | Ao utilizar estas flags seguidas por uma lista de nomes de grupos separada por vírgulas, você pode registrar seu edge-node com o(s) grupo(s) especificado(s) através da linha de comando ao iniciá-lo pela primeira vez. <br/> Exemplo: sudo edge-orchestrator start -g GROUP1,GROUP2,GROUP3 --foreground |
| start \[-n OR --set-name\] | Ao utilizar estas flags seguidas do nome desejado, você pode especificar o nome de seu novo node através da linha de comando ao iniciá-lo pela primeira vez . Caso não sejam usadas, o hostname é usado como valor padrão. <br/> Exemplo: sudo edge-orchestrator start -n Edgenodename --foreground |
| status | Obtém o status de execução do agente do Edge Orchestrator. |
| stop | Para a execução do agente do Edge Orchestrator por meio do gerenciador de serviços do device. |
| uninstall | Desinstala o agente do device do cliente. Remove o binário do local de instalação; remove o agente do Edge Orchestrator do gerenciador de serviços do device (caso exista). <br />Observação: as credenciais de autenticação permanecem no device e podem ser removidas via painel de controle da Azion. |
| --version ou -v | Exibe a versão do agente instalado. |

Como observado na tabela acima podemos ter as seguintes start-flags:

`--foreground`
`--join-group` <groupname> or `-g` <groupname>
`--set-name` <nodename> or `-n` <nodename>

> As start-flags são opcionais.

---

## 6. Watcher

Para evitar qualquer mudança de configuração nos recursos administrados pelo Orchestrator, o agente oferece um recurso chamado **Watcher**.

É um recurso não gerenciável de nosso agente que restaura qualquer arquivo adulterado, ou seja, consiste em um grupo de *workers* que verifica periodicamente todos os arquivos provisionados procurando por qualquer desvio – modificação ou remoção – com base no último manifesto aplicado, restaurando o estado desejado, se necessário.

Você pode verificar qualquer ação feita pelo **Watcher** consultando o *logfile* `/var/log/azion/edge-orchestrator.log`.

Exemplo:

    # /var/log/azion/edge-orchestrator.log
    {"level":"info","time":"2021-09-22T17:31:16Z","message":"finished applying resources for version 3128"}
    {"level":"info","time":"2021-09-22T17:31:16Z","message":"apply manifest 3128 finished"}
    {"level":"info","time":"2021-09-22T17:31:16Z","message":"watcher: started with period of 60 seconds using 5 workers"}
    {"level":"info","time":"2021-09-22T17:32:16Z","message":"watcher: dispatching workers"}
    {"level":"info","time":"2021-09-22T17:32:16Z","message":"watcher: dispatched 5 workers"}
    {"level":"info","time":"2021-09-22T17:32:16Z","message":"watcher: workers finished"}
    {"level":"info","time":"2021-09-22T17:32:16Z","message":"watcher: checked 19576 artifacts, 0 drifted from manifest."}

---

Não encontrou o que procurava? [Abra um ticket](https://tickets.azion.com/pt-BR/support/login/).
